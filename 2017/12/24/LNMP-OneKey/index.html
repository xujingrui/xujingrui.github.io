<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>LNMP平台一键部署 • My Blog</title><meta name="description" content="LNMP平台一键部署 - XuJingRui"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.svg"><link rel="stylesheet" href="https://unpkg.com/nanoreset/nanoreset.min.css"><link rel="stylesheet" href="/css/theme.css"><link rel="search" type="application/opensearchdescription+xml" href="/atom.xml" title="My Blog"></head><body><div class="wrap" id="barba-wrapper"><header><h1 class="branding"><a href="/" title="My Blog">My Blog</a></h1><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link no-barba" href="/" target="_self">BLOG</a></li><li class="nav-list-item"><a class="nav-list-link no-barba" href="/archives" target="_self">HOME</a></li><li class="nav-list-item"><a class="nav-list-link no-barba" href="https://github.com/xujingrui" target="_blank">GITHUB</a></li><li class="nav-list-item"><a class="nav-list-link no-barba" href="/about" target="_self">ABOUT</a></li></ul></header><div class="barba-container"><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">LNMP平台一键部署</h1><div class="post-info"><a></a>2017-12-24</div><div class="post-content"><h2 id="一、介绍"><a href="#一、介绍" class="headerlink" title="一、介绍"></a><strong>一、介绍</strong></h2><p>LNMP一键安装包是一个用Linux Shell编写的可以为CentOS/RHEL/Fedora/Aliyun/Amazon、Debian/Ubuntu/Raspbian/DeepinServer/Mint Linux VPS或独立主机安装LNMP(Nginx/MySQL/PHP)、LNMPA(Nginx/MySQL/PHP/Apache)、LAMP(Apache/MySQL/PHP)生产环境的Shell程序。</p>
<p>官方网站：<a href="https://lnmp.org" target="_blank" rel="noopener">https://lnmp.org</a></p>
<p>下载地址：</p>
<table>
<thead>
<tr>
<th style="text-align:center">项目</th>
<th style="text-align:center">版本</th>
<th style="text-align:center">MD5</th>
<th style="text-align:center">大小</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">下载版</td>
<td style="text-align:center"><a href="http://soft.vpser.net/lnmp/lnmp1.4.tar.gz" target="_blank" rel="noopener">http://soft.vpser.net/lnmp/lnmp1.4.tar.gz</a></td>
<td style="text-align:center">06df74d7a2f9bf64fc9a108ad429f1fb</td>
<td style="text-align:center">134KB</td>
</tr>
<tr>
<td style="text-align:center">完整版</td>
<td style="text-align:center"><a href="http://soft.vpser.net/lnmp/lnmp1.4-full.tar.gz" target="_blank" rel="noopener">http://soft.vpser.net/lnmp/lnmp1.4-full.tar.gz</a></td>
<td style="text-align:center">404dea1dc3e61333790486f197f3b7e5</td>
<td style="text-align:center">467MB</td>
</tr>
</tbody>
</table>
<h3 id="注意："><a href="#注意：" class="headerlink" title="注意："></a><strong>注意：</strong></h3><blockquote>
<ul>
<li>下载完建议先验证MD5</li>
<li>使用前建议先去官网了解安装过程–&gt; <a href="https://lnmp.org/install.html" target="_blank" rel="noopener">传送门</a></li>
<li>下载的脚本文件不要放在临时目录（如 /tmp），不要删除脚本文件</li>
<li>确保机器可以上网，YUM仓库可用</li>
</ul>
</blockquote>
<h2 id="二、安装"><a href="#二、安装" class="headerlink" title="二、安装"></a><strong>二、安装</strong></h2><table>
<thead>
<tr>
<th>项目　　　</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>Linux</td>
<td>CentOS release 6.8 (Final)</td>
</tr>
<tr>
<td>Nginx</td>
<td>1.12.2</td>
</tr>
<tr>
<td>Php-fpm</td>
<td>5.6.31</td>
</tr>
<tr>
<td>Mysql</td>
<td>5.7.18</td>
</tr>
</tbody>
</table>
<ul>
<li>下载安装脚本:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://soft.vpser.net/lnmp/lnmp1.4-full.tar.gz -o /data/lnmp1.4-full.tar.gz</span><br></pre></td></tr></table></figure>
<ul>
<li>解压文件：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /data</span><br><span class="line">tar -xvf lnmp1.4-full.tar.gz</span><br><span class="line">cd lnmp1.4-full</span><br></pre></td></tr></table></figure>
<ul>
<li>安装前修改自定义设置：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@Node1 lnmp1.4-full]# cat lnmp.conf </span><br><span class="line"></span><br><span class="line">Download_Mirror=&apos;https://soft.vpser.net&apos;</span><br><span class="line"></span><br><span class="line">#自定义安装Nginx模块（默认：configure arguments: --user=www --group=www --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_v2_module --with-http_gzip_static_module --with-ipv6 --with-http_sub_module --with-openssl=/data/lnmp1.4-full/src/openssl-1.0.2l）</span><br><span class="line">Nginx_Modules_Options=&apos;&apos;</span><br><span class="line"></span><br><span class="line">#自定义安装Php-fpm模块(默认：&apos;./configure&apos; &apos;--prefix=/usr/local/php&apos; &apos;--with-config-file-path=/usr/local/php/etc&apos; &apos;--with-config-file-scan-dir=/usr/local/php/conf.d&apos; &apos;--enable-fpm&apos; &apos;--with-fpm-user=www&apos; &apos;--with-fpm-group=www&apos; &apos;--with-mysql=mysqlnd&apos; &apos;--with-mysqli=mysqlnd&apos; &apos;--with-pdo-mysql=mysqlnd&apos; &apos;--with-iconv-dir&apos; &apos;--with-freetype-dir=/usr/local/freetype&apos; &apos;--with-jpeg-dir&apos; &apos;--with-png-dir&apos; &apos;--with-zlib&apos; &apos;--with-libxml-dir=/usr&apos; &apos;--enable-xml&apos; &apos;--disable-rpath&apos; &apos;--enable-bcmath&apos; &apos;--enable-shmop&apos; &apos;--enable-sysvsem&apos; &apos;--enable-inline-optimization&apos; &apos;--with-curl&apos; &apos;--enable-mbregex&apos; &apos;--enable-mbstring&apos; &apos;--with-mcrypt&apos; &apos;--enable-ftp&apos; &apos;--with-gd&apos; &apos;--enable-gd-native-ttf&apos; &apos;--with-openssl&apos; &apos;--with-mhash&apos; &apos;--enable-pcntl&apos; &apos;--enable-sockets&apos; &apos;--with-xmlrpc&apos; &apos;--enable-zip&apos; &apos;--enable-soap&apos; &apos;--with-gettext&apos; &apos;--disable-fileinfo&apos; &apos;--enable-opcache&apos; &apos;--enable-intl&apos; &apos;--with-xsl&apos;)</span><br><span class="line">PHP_Modules_Options=&apos;&apos;</span><br><span class="line"></span><br><span class="line">##MySQL/MariaDB database directory##定义数据库数据目录</span><br><span class="line">MySQL_Data_Dir=&apos;/usr/local/mysql/var&apos;</span><br><span class="line">MariaDB_Data_Dir=&apos;/usr/local/mariadb/var&apos;</span><br><span class="line"></span><br><span class="line">##Default website home directory##Nginx代码目录</span><br><span class="line">Default_Website_Dir=&apos;/home/wwwroot/default&apos;</span><br><span class="line"></span><br><span class="line">##是否安装Nginx Openssl模块</span><br><span class="line">Enable_Nginx_Openssl=&apos;y&apos;</span><br></pre></td></tr></table></figure>
<ul>
<li>安装：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./install.sh</span><br></pre></td></tr></table></figure>
<ul>
<li>安装选择：</li>
</ul>
<p><img src="https://raw.githubusercontent.com/xujingrui/xujingrui.github.io/master/home/images/onekey-all.jpg" alt="one-key-all"></p>
<ul>
<li>安装完成：</li>
</ul>
<p><img src="https://raw.githubusercontent.com/xujingrui/xujingrui.github.io/master/home/images/onekey-over.jpg" alt="one-key-over"></p>
<p>安装过程日志==&gt; <code>/root/lnmp-install.log</code></p>
<table>
<thead>
<tr>
<th>项目</th>
<th>目录</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>Nginx</td>
<td>/usr/local/nginx</td>
<td>程序安装</td>
</tr>
<tr>
<td>　</td>
<td>/etc/init.d/nginx</td>
<td>启动脚本</td>
</tr>
<tr>
<td>　</td>
<td>/usr/local/nginx/conf</td>
<td>配置文件</td>
</tr>
<tr>
<td>　</td>
<td>/home/wwwroot/default　</td>
<td>代码路径</td>
</tr>
<tr>
<td>　</td>
<td>/home/wwwlogs</td>
<td>日志路径</td>
</tr>
<tr>
<td>Php-Fpm　</td>
<td>/usr/local/php</td>
<td>程序安装</td>
</tr>
<tr>
<td>　</td>
<td>/etc/init.d/php-fpm</td>
<td>启动脚本</td>
</tr>
<tr>
<td>　</td>
<td>/usr/local/php/etc</td>
<td>配置文件</td>
</tr>
<tr>
<td>　</td>
<td>/usr/local/php/var/log</td>
<td>日志路径</td>
</tr>
<tr>
<td>　</td>
<td>/tmp/php-cgi.sock</td>
<td>SOCK路径</td>
</tr>
<tr>
<td>Mysql</td>
<td>/usr/local/mysql</td>
<td>程序安装</td>
</tr>
<tr>
<td>　</td>
<td>/etc/init.d/mysql</td>
<td>启动脚本</td>
</tr>
<tr>
<td>　</td>
<td>/etc/my.cnf</td>
<td>配置文件</td>
</tr>
<tr>
<td>　</td>
<td>/usr/local/mysql/var</td>
<td>数据目录</td>
</tr>
<tr>
<td>　</td>
<td>/tmp/mysql.sock</td>
<td>SOCK路径</td>
</tr>
</tbody>
</table>
<h3 id="建议："><a href="#建议：" class="headerlink" title="建议："></a><strong>建议：</strong></h3><p>将<code>/home/wwwroot/default</code>路径下的文件都删除！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── index.html</span><br><span class="line">├── lnmp.gif</span><br><span class="line">├── ocp.php</span><br><span class="line">├── phpinfo.php</span><br><span class="line">├── phpmyadmin</span><br></pre></td></tr></table></figure>
<h3 id="注意：-1"><a href="#注意：-1" class="headerlink" title="注意："></a><strong>注意：</strong></h3><p>LNMP一键安装会将crond服务重新安装，安装后没有启动服务,需要手动启动一次<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@Node1 /]# chkconfig |grep crond</span><br><span class="line">crond          	0:关闭	1:关闭	2:启用	3:启用	4:启用	5:启用	6:关闭</span><br><span class="line">[root@Node1 /]# /etc/init.d/crond status</span><br><span class="line">crond 已停</span><br><span class="line">[root@Node1 /]# /etc/init.d/crond start</span><br><span class="line">正在启动 crond：                                           [确定]</span><br></pre></td></tr></table></figure></p>
</div></article></div></main><footer><div class="paginator"><a class="next" href="/2017/12/23/image/">next</a></div><div class="copyright"><p>&copy; 2012 - 2017 <a href="/about">XuJingRui</a><br>Powered by <a href="https://hexo.io/" rel="noreferrer" target="_blank">Hexo</a></p></div></footer></div></div><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-X']);
_gaq.push(['_trackPageview']);

(function () {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script><script src="https://cdnjs.cloudflare.com/ajax/libs/barba.js/1.0.0/barba.min.js"></script><script>document.addEventListener('DOMContentLoaded', function() {
    Barba.Pjax.start()
})</script></body></html>